<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sahil Gurung ‚Äî Game Developer Portfolio</title>
<!-- Google Fonts + simple icon -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0f16;
    --card:#0f1620;
    --accent1:#7c5cff; /* purple */
    --accent2:#02b3ff; /* blue */
    --muted:#9aa6b2;
    --glass: rgba(255,255,255,0.03);
    --neon: 0 0 20px rgba(124,92,255,0.35), 0 0 40px rgba(2,179,255,0.12);
    --radius:14px;
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,#07101a 0%, #02030b 100%);color:#e6eef6;overflow-x:hidden}
  /* layout */
  .container{display:grid;grid-template-columns:300px 1fr;min-height:100vh;gap:28px;padding:28px;}
  .sidebar{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:20px;position:relative;backdrop-filter:blur(6px);box-shadow:var(--neon)}
  .main{position:relative;overflow:hidden;padding:28px 24px;border-radius:var(--radius)}
  header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
  .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#02030b;font-size:18px;box-shadow:0 6px 30px rgba(2,179,255,0.08);transform:translateZ(20px)}
  h1{font-size:20px;margin:0}
  p.lead{color:var(--muted);margin:6px 0 0;font-size:13px}

  /* 3D canvas background container */
  #three-wrap{position:absolute;inset:0;z-index:0;pointer-events:none}
  /* overlay gradient for mood */
  #three-overlay{position:absolute;inset:0;background:radial-gradient(circle at 20% 20%, rgba(124,92,255,0.06), transparent 10%), radial-gradient(circle at 80% 80%, rgba(2,179,255,0.04), transparent 10%);z-index:1;mix-blend-mode:overlay;pointer-events:none}

  /* content cards */
  .cards{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:18px;position:relative;z-index:2}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.01));padding:16px;border-radius:12px;box-shadow:0 8px 30px rgba(2,4,12,0.6);transition:transform 300ms cubic-bezier(.2,.9,.3,1), box-shadow 300ms;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  .card:hover{transform:translateY(-8px);box-shadow:0 20px 60px rgba(2,179,255,0.06)}
  .game-thumb{position:relative;border-radius:10px;overflow:hidden;height:180px;background:#06101a;display:flex;align-items:center;justify-content:center}
  .thumb-canvas{width:100%;height:100%;display:block}
  .game-title{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
  .btn{padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;color:#02030b;font-weight:700;cursor:pointer;box-shadow:var(--neon);transition:transform 160ms}
  .btn:active{transform:translateY(1px)}
  .btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
  .meta{font-size:12px;color:var(--muted)}

  /* animated hover icons */
  .floating-icons{position:absolute;right:24px;top:24px;display:flex;flex-direction:column;gap:14px;z-index:3}
  .icon{width:46px;height:46px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(6px);box-shadow:0 6px 20px rgba(0,0,0,0.6)}
  .icon.glow{box-shadow:0 8px 40px rgba(124,92,255,0.14), 0 0 24px rgba(2,179,255,0.06)}
  .float{animation:float 4s ease-in-out infinite}
  @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}

  /* sidebar content */
  .avatar{width:84px;height:84px;border-radius:12px;background:linear-gradient(180deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#02030b;font-size:28px;margin-bottom:12px;box-shadow:var(--neon)}
  .skill{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:rgba(255,255,255,0.02);border-radius:8px;margin-bottom:8px;font-size:13px}
  .contact-form{display:flex;flex-direction:column;gap:8px;margin-top:12px}
  .contact-form input,.contact-form textarea{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px;border-radius:8px;color:inherit;font-size:13px;outline:none}
  .contact-form textarea{min-height:80px;resize:vertical}
  .small{font-size:12px;color:var(--muted)}

  /* footer */
  footer{grid-column:1/-1;padding:14px 28px;display:flex;align-items:center;justify-content:space-between;gap:12px;color:var(--muted);z-index:3}
  .socials a{margin-left:12px;color:var(--muted);text-decoration:none;font-weight:600}

  /* full-screen game overlay */
  .overlay{position:fixed;inset:0;background:linear-gradient(180deg,rgba(2,6,14,0.9), rgba(4,6,8,0.95));display:none;align-items:center;justify-content:center;z-index:999}
  .overlay.active{display:flex}
  .game-frame{width:min(1100px,94vw);height:min(700px,86vh);background:#05101a;border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:8px}
  .game-frame header{display:flex;justify-content:space-between;align-items:center}
  .close-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:8px}
  canvas.game-canvas{width:100%;height:100%;background:#02030b;border-radius:8px;display:block}

  /* previews small animated overlay */
  .preview-strip{height:6px;width:100%;background:linear-gradient(90deg,var(--accent1),var(--accent2));border-radius:4px;transform-origin:left;animation:preview 2.2s linear infinite}
  @keyframes preview{0%{transform:scaleX(0)}100%{transform:scaleX(1)}}

  /* light mode toggle */
  .mode-toggle{cursor:pointer;padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
  .light{--bg:#f7f9fb;--card:#ffffff;color:#07101a}
  .light body{background:linear-gradient(180deg,#f7fbff,#fff)}
  /* responsive */
  @media (max-width:980px){
    .container{grid-template-columns:1fr;padding:18px}
    .sidebar{order:2}
    .main{order:1}
    .cards{grid-template-columns:1fr}
    .floating-icons{display:none}
  }
</style>
</head>
<body>
<div class="container" id="root">
  <aside class="sidebar" id="sidebar">
    <div class="avatar">SG</div>
    <h2 style="margin:0">Sahil Gurung</h2>
    <p class="small">Game Developer ‚Ä¢ Gameplay Systems ‚Ä¢ Level Design ‚Ä¢ Web Integration</p>
    <hr style="border:none;height:1px;background:rgba(255,255,255,0.02);margin:12px 0;border-radius:2px">
    <h3 style="margin:8px 0 6px;font-size:14px">About</h3>
    <p class="small" style="line-height:1.35">Passionate indie game dev crafting immersive experiences. I blend gameplay systems, aesthetic polish, and scalable backend tooling (Docker, AWS, Microservices).</p>
    <h3 style="margin-top:12px;font-size:14px">Skills</h3>
    <div class="skill"><span>Docker</span><span class="small">Advanced</span></div>
    <div class="skill"><span>AWS</span><span class="small">EC2, S3, Lambda</span></div>
    <div class="skill"><span>Microservices</span><span class="small">Node.js, REST</span></div>

    <h3 style="margin-top:12px;font-size:14px">Contact</h3>
    <form class="contact-form" id="contactForm" onsubmit="event.preventDefault();sendContact()">
      <input required id="name" placeholder="Your name" />
      <input required id="email" placeholder="Your email" />
      <textarea id="message" placeholder="What would you like to build?" required></textarea>
      <button class="btn" type="submit">Send Message</button>
      <div id="contactResult" class="small" style="margin-top:8px;display:none"></div>
    </form>

    <div style="position:absolute;bottom:18px;left:18px;right:18px;display:flex;justify-content:space-between;align-items:center">
      <div class="small">Built with love ‚Ä¢ Interactive portfolio</div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="mode-toggle" id="modeToggle">üåô</div>
      </div>
    </div>
  </aside>

  <main class="main">
    <div id="three-wrap"></div>
    <div id="three-overlay"></div>

    <header style="position:relative;z-index:2;">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo">SG</div>
        <div>
          <h1>Sahil Gurung ‚Äî Game Developer</h1>
          <p class="lead">Step into the arcade. Play demos, explore prototypes, and connect.</p>
        </div>
      </div>
    </header>

    <div class="floating-icons" aria-hidden="true">
      <div class="icon glow float">üéÆ</div>
      <div class="icon float">üïπÔ∏è</div>
      <div class="icon glow float">‚ú®</div>
    </div>

    <section style="margin-top:12px;position:relative;z-index:2">
      <div style="display:flex;justify-content:space-between;align-items:end;gap:16px">
        <div>
          <h2 style="margin:0">Playable Demos</h2>
          <p class="small" style="margin-top:6px">Four bite-sized games embedded directly ‚Äî click Play to jump in.</p>
        </div>
        <div class="meta">Hover thumbnails for animated previews ‚Ä¢ Click cover to play</div>
      </div>

      <div class="cards" style="margin-top:14px">
        <!-- Game 1 -->
        <article class="card">
          <div class="game-thumb" data-game="chasath" role="button" tabindex="0" aria-label="Open Chronicles of Chasath preview">
            <canvas class="thumb-canvas" id="thumb-chasath"></canvas>
          </div>
          <div class="game-title">
            <div>
              <div style="font-weight:700">Chronicles of Chasath</div>
              <div class="meta">Action RPG ‚Äî top-down demo</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" onclick="openGame('chasath')">Play Now</button>
              <button class="btn btn-outline" onclick="previewGame('chasath')">Preview</button>
            </div>
          </div>
          <div style="margin-top:10px" class="preview-strip" id="preview-strip-chasath" hidden></div>
        </article>

        <!-- Game 2 -->
        <article class="card">
          <div class="game-thumb" data-game="iglaia">
            <canvas class="thumb-canvas" id="thumb-iglaia"></canvas>
          </div>
          <div class="game-title">
            <div>
              <div style="font-weight:700">Iglaia of Su</div>
              <div class="meta">Pirate adventure ‚Äî side-scroller</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" onclick="openGame('iglaia')">Play Now</button>
              <button class="btn btn-outline" onclick="previewGame('iglaia')">Preview</button>
            </div>
          </div>
          <div style="margin-top:10px" class="preview-strip" id="preview-strip-iglaia" hidden></div>
        </article>

        <!-- Game 3 -->
        <article class="card">
          <div class="game-thumb" data-game="prus">
            <canvas class="thumb-canvas" id="thumb-prus"></canvas>
          </div>
          <div class="game-title">
            <div>
              <div style="font-weight:700">Prus Little Oddy</div>
              <div class="meta">Cartoon platformer ‚Äî jump & collect</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" onclick="openGame('prus')">Play Now</button>
              <button class="btn btn-outline" onclick="previewGame('prus')">Preview</button>
            </div>
          </div>
          <div style="margin-top:10px" class="preview-strip" id="preview-strip-prus" hidden></div>
        </article>

        <!-- Game 4 -->
        <article class="card">
          <div class="game-thumb" data-game="faraery">
            <canvas class="thumb-canvas" id="thumb-faraery"></canvas>
          </div>
          <div class="game-title">
            <div>
              <div style="font-weight:700">Faraery Racers</div>
              <div class="meta">Sports arcade ‚Äî fast-paced mini-race</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" onclick="openGame('faraery')">Play Now</button>
              <button class="btn btn-outline" onclick="previewGame('faraery')">Preview</button>
            </div>
          </div>
          <div style="margin-top:10px" class="preview-strip" id="preview-strip-faraery" hidden></div>
        </article>
      </div>
    </section>

    <section style="margin-top:20px;z-index:2;position:relative">
      <h3 style="margin:0 0 8px">Featured Work & Notes</h3>
      <div class="card" style="display:flex;gap:12px;align-items:center">
        <div style="flex:1">
          <div style="font-weight:700">Zing Closet ‚Äî Gameplay-integrated ecommerce demo</div>
          <div class="small" style="margin-top:6px">Integrated a mini-game in an e-commerce flow for engagement. Built with Flutter, Node.js, and microservice patterns.</div>
        </div>
        <div style="display:flex;gap:8px">
          <a class="btn btn-outline" href="mailto:1sahilisbusy1@gmail.com">Email</a>
          <a class="btn" href="#" onclick="alert('Resume: downloaded (placeholder)')">Download Resume</a>
        </div>
      </div>
    </section>

    <footer style="margin-top:18px;position:relative;z-index:2">
      <div style="display:flex;gap:12px;align-items:center">
        <strong>Socials</strong>
        <div class="socials">
          <a href="#" title="Twitter">üê¶</a>
          <a href="#" title="GitHub">üêô</a>
          <a href="#" title="Itch.io">üé≤</a>
        </div>
      </div>
      <div class="small">¬© Sahil Gurung ‚Äî immersive arcade portfolio</div>
    </footer>

  </main>
</div>

<!-- Full-screen overlay for playing games -->
<div class="overlay" id="overlay">
  <div class="game-frame" role="dialog" aria-modal="true" aria-label="Game window">
    <header>
      <div style="font-weight:700" id="overlay-title">Game</div>
      <div style="display:flex;gap:8px">
        <button class="close-btn" onclick="closeOverlay()">Close</button>
        <button class="btn" onclick="restartOverlay()">Restart</button>
      </div>
    </header>
    <div style="flex:1;display:flex;align-items:stretch">
      <canvas id="gameCanvas" class="game-canvas"></canvas>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
      <div class="small" id="overlay-instructions">Use arrow keys / WASD. Press P to pause.</div>
      <div class="small" id="overlay-score"></div>
    </div>
  </div>
</div>

<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r154/three.min.js"></script>

<script>
/* -------------------------
  Simple 3D background (three.js)
---------------------------*/
const threeWrap = document.getElementById('three-wrap');
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 2000);
const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
threeWrap.appendChild(renderer.domElement);
camera.position.set(0, 1.6, 4);

// lights
const amb = new THREE.AmbientLight(0xffffff, 0.3);
scene.add(amb);
const p1 = new THREE.PointLight(0x7c5cff, 1.2, 10);
p1.position.set(-2,2,3); scene.add(p1);
const p2 = new THREE.PointLight(0x02b3ff, 1.2, 10);
p2.position.set(2,0.5,3); scene.add(p2);

// floor
const floorMat = new THREE.MeshStandardMaterial({color:0x061118, roughness:0.7, metalness:0.05});
const floor = new THREE.Mesh(new THREE.PlaneGeometry(20,20), floorMat);
floor.rotation.x = -Math.PI/2; floor.position.y = -1.1; scene.add(floor);

// create dual monitors and keyboard using boxes
const matMonitor = new THREE.MeshStandardMaterial({color:0x02030b, emissive:0x001a2b, metalness:0.4, roughness:0.2});
function makeMonitor(x){
  const group = new THREE.Group();
  const screen = new THREE.Mesh(new THREE.BoxGeometry(1.6,0.95,0.05), matMonitor);
  screen.position.z = -0.02;
  const frame = new THREE.Mesh(new THREE.BoxGeometry(1.8,1.05,0.06), new THREE.MeshStandardMaterial({color:0x020617}));
  group.add(frame); group.add(screen);
  const stand = new THREE.Mesh(new THREE.BoxGeometry(0.1,0.3,0.1), new THREE.MeshStandardMaterial({color:0x081218}));
  stand.position.set(0,-0.6,0);
  const base = new THREE.Mesh(new THREE.BoxGeometry(0.6,0.06,0.28), new THREE.MeshStandardMaterial({color:0x081218}));
  base.position.set(0,-0.85,0);
  group.add(stand); group.add(base);
  group.position.x = x; group.position.y = -0.1; group.position.z = -0.4;
  return group;
}
const leftMon = makeMonitor(-0.95);
const rightMon = makeMonitor(0.95);
rightMon.rotation.y = 0.08;
leftMon.rotation.y = -0.08;
scene.add(leftMon, rightMon);

// keyboard (RGB row)
const keyboard = new THREE.Group();
for(let i=-6;i<=6;i++){
  for(let r=0;r<3;r++){
    const key = new THREE.Mesh(new THREE.BoxGeometry(0.18,0.05,0.12), new THREE.MeshStandardMaterial({color:0x02111b}));
    key.position.set(i*0.2, -0.92, -0.18 - r*0.13);
    keyboard.add(key);
    // small emissive dot for RGB
    const led = new THREE.Mesh(new THREE.BoxGeometry(0.05,0.01,0.05), new THREE.MeshStandardMaterial({emissive:0x000000}));
    led.position.copy(key.position).add(new THREE.Vector3(0,0.035,0));
    keyboard.add(led);
  }
}
scene.add(keyboard);

// ambient neon lights (thin blocks)
const neonLeft = new THREE.Mesh(new THREE.BoxGeometry(0.6,0.02,4), new THREE.MeshStandardMaterial({emissive:0x7c5cff, emissiveIntensity:0.02, color:0x02030b}));
neonLeft.position.set(-3, -0.9, -1.4); scene.add(neonLeft);
const neonRight = neonLeft.clone(); neonRight.position.x = 3; neonRight.material = neonLeft.material.clone(); neonRight.material.emissive.setHex(0x02b3ff); scene.add(neonRight);

// subtle animation
let t = 0;
function animateThree(){
  t += 0.01;
  // rotate monitors slightly
  leftMon.rotation.y = -0.08 + Math.sin(t*0.5)*0.01;
  rightMon.rotation.y = 0.08 + Math.cos(t*0.5)*0.01;
  // RGB shimmer on keyboard leds
  keyboard.children.forEach((c,i)=>{
    if(c.material && c.material.emissive){
      const hue = (Math.sin(t + i)*0.5 + 0.5);
      const r = Math.floor(124 * hue);
      const g = Math.floor(92 * hue);
      const b = Math.floor(255 * (1-hue));
      c.material.emissive.setRGB(r/255, g/255, b/255);
      c.material.emissiveIntensity = 0.5 + 0.5*Math.sin(t*3 + i*0.1);
    }
  });
  // floating camera slight parallax by mouse
  camera.position.x += (mouseX*0.002 - camera.position.x) * 0.06;
  camera.position.y += ((1.6 + mouseY*0.002) - camera.position.y) * 0.06;
  camera.lookAt(0,0,0);
  renderer.render(scene, camera);
  requestAnimationFrame(animateThree);
}
window.addEventListener('resize', ()=>{renderer.setSize(window.innerWidth, window.innerHeight); camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix();});
let mouseX=0, mouseY=0;
document.addEventListener('mousemove', (e)=>{ mouseX = (e.clientX - window.innerWidth/2); mouseY = (e.clientY - window.innerHeight/2);});
animateThree();

/* -------------------------
  Mini-games: prototypes
  - Each thumbnail is a small canvas with a looping preview animation.
  - Full play opens overlay and runs the selected game's logic on a larger canvas.
---------------------------*/
const games = {};
// helper to create thumbnail canvas contexts sized to element
function setupThumb(id, drawFn){
  const c = document.getElementById(id);
  function resize(){ c.width = c.clientWidth * devicePixelRatio; c.height = c.clientHeight * devicePixelRatio; }
  resize(); window.addEventListener('resize', resize);
  const ctx = c.getContext('2d');
  let frame = 0;
  function loop(){
    frame++;
    ctx.clearRect(0,0,c.width,c.height);
    ctx.save();
    ctx.scale(devicePixelRatio, devicePixelRatio);
    drawFn(ctx, c.clientWidth, c.clientHeight, frame);
    ctx.restore();
    requestAnimationFrame(loop);
  }
  loop();
  return ctx;
}

/* Game 1: Chronicles of Chasath (Top-down action demo)
   Very small prototype: player moves, strikes a dummy enemy.
*/
games['chasath'] = {
  name:'Chronicles of Chasath',
  thumbDraw: (ctx,w,h,f)=>{
    // sky
    ctx.fillStyle = '#06121a'; ctx.fillRect(0,0,w,h);
    // ground grid
    ctx.strokeStyle = 'rgba(255,255,255,0.03)'; ctx.lineWidth=1;
    for(let i=0;i<10;i++){
      ctx.beginPath();
      ctx.moveTo((i+f*0.02)%w,0);
      ctx.lineTo((i+f*0.02)%w,h);
      ctx.stroke();
    }
    // hero
    const hx = w/2 + Math.sin(f*0.08)*30;
    const hy = h/2 + Math.cos(f*0.05)*10;
    ctx.fillStyle = '#8f6bff'; ctx.beginPath(); ctx.arc(hx,hy,12,0,Math.PI*2); ctx.fill();
    // sword swing
    ctx.save(); ctx.translate(hx,hy); ctx.rotate(Math.sin(f*0.2)*0.6);
    ctx.fillStyle = '#b9b3ff'; ctx.fillRect(12,-3,20,6);
    ctx.restore();
    // enemy dummy
    ctx.fillStyle = '#ff7a7a'; ctx.beginPath(); ctx.rect(w/2+70, h/2-6, 14, 20); ctx.fill();
    // title
    ctx.fillStyle = '#cbd8ff'; ctx.font = '14px Inter'; ctx.fillText('Chronicles of Chasath', 10,18);
  },
  init(fullCanvas, state){ // full game loop
    const ctx = fullCanvas.getContext('2d');
    let w = fullCanvas.width = fullCanvas.clientWidth; let h = fullCanvas.height = fullCanvas.clientHeight;
    const player = {x: w/2, y: h/2, r:14, vx:0, vy:0};
    const enemy = {x: w/2+140, y: h/2, r:16, hp:5};
    const keys = {};
    let last = performance.now();
    function resize(){ w = fullCanvas.width = fullCanvas.clientWidth; h = fullCanvas.height = fullCanvas.clientHeight; }
    window.addEventListener('resize', resize);
    function update(dt){
      // movement
      const speed = 180;
      player.vx = (keys['ArrowRight']||keys['d']) - (keys['ArrowLeft']||keys['a']);
      player.vy = (keys['ArrowDown']||keys['s']) - (keys['ArrowUp']||keys['w']);
      if(player.vx || player.vy){
        const len = Math.hypot(player.vx, player.vy);
        player.x += (player.vx/len) * speed * dt;
        player.y += (player.vy/len) * speed * dt;
      }
    }
    function draw(){
      ctx.clearRect(0,0,w,h);
      // background
      ctx.fillStyle = '#05101a'; ctx.fillRect(0,0,w,h);
      // enemy
      ctx.fillStyle = '#ff7a7a'; ctx.beginPath(); ctx.arc(enemy.x, enemy.y, enemy.r,0,Math.PI*2); ctx.fill();
      // player
      ctx.fillStyle = '#8f6bff'; ctx.beginPath(); ctx.arc(player.x, player.y, player.r,0,Math.PI*2); ctx.fill();
      // UI
      ctx.fillStyle = '#cbd8ff'; ctx.font='16px Inter'; ctx.fillText('HP: ' + enemy.hp, 12,24);
    }
    let animId;
    function loop(now){
      const dt = (now - last)/1000; last = now;
      update(dt);
      draw();
      animId = requestAnimationFrame(loop);
    }
    // controls
    function keyDown(e){ keys[e.key]=true; if(e.key===' '){ // attack space
      // simple hit check
      const dx = enemy.x-player.x; const dy = enemy.y-player.y; if(Math.hypot(dx,dy) < 70){ enemy.hp--; if(enemy.hp<=0){ enemy.hp=0; } }
    }}
    function keyUp(e){ keys[e.key]=false; }
    window.addEventListener('keydown', keyDown); window.addEventListener('keyup', keyUp);
    loop(performance.now());
    return ()=>{ cancelAnimationFrame(animId); window.removeEventListener('keydown', keyDown); window.removeEventListener('keyup', keyUp); };
  }
};

/* Game 2: Iglaia of Su ‚Äî simple side-scroller (move + shoot) */
games['iglaia'] = {
  name:'Iglaia of Su',
  thumbDraw: (ctx,w,h,f)=>{
    ctx.fillStyle = '#04121a'; ctx.fillRect(0,0,w,h);
    // parallax clouds
    ctx.fillStyle = 'rgba(2,179,255,0.06)';
    for(let i=0;i<6;i++){ ctx.beginPath(); ctx.ellipse((i*120 + f*0.6)%w, 40 + (i%2)*10, 40, 18, 0,0,Math.PI*2); ctx.fill();}
    // ship
    const sx = 40 + (f*0.9)%w; const sy = h/2;
    ctx.fillStyle = '#8f6bff'; ctx.fillRect(sx, sy-8, 48, 16);
    ctx.fillStyle = '#cbd8ff'; ctx.fillRect(sx+44, sy-4, 8, 8);
    // enemy
    ctx.fillStyle = '#ffb86b'; ctx.beginPath(); ctx.arc(w-60, h/2, 18,0,Math.PI*2); ctx.fill();
    ctx.fillStyle='#cbd8ff'; ctx.font='13px Inter'; ctx.fillText('Iglaia of Su', 8,16);
  },
  init(fullCanvas){
    const ctx = fullCanvas.getContext('2d');
    let w = fullCanvas.width = fullCanvas.clientWidth; let h = fullCanvas.height = fullCanvas.clientHeight;
    window.addEventListener('resize', ()=>{ w = fullCanvas.width = fullCanvas.clientWidth; h = fullCanvas.height = fullCanvas.clientHeight;});
    const ship = {x:60,y:h/2,vy:0};
    const bullets = []; const enemies = [{x:w-80,y:h/2, r:24}];
    const keys = {};
    let animId; function loop(){
      animId = requestAnimationFrame(loop);
      // physics
      if(keys['ArrowUp']||keys['w']) ship.y -= 6; if(keys['ArrowDown']||keys['s']) ship.y += 6;
      bullets.forEach(b=>{ b.x += 8;});
      // collision
      bullets.forEach((b)=>{ enemies.forEach(e=>{ if(Math.hypot(b.x-e.x,b.y-e.y) < e.r){ e.hit= true; b.dead=true; }})});
      // draw
      ctx.clearRect(0,0,w,h); ctx.fillStyle='#03101a'; ctx.fillRect(0,0,w,h);
      // ship
      ctx.fillStyle='#8f6bff'; ctx.fillRect(ship.x, ship.y-12, 48, 24);
      // bullets
      ctx.fillStyle = '#02b3ff'; bullets.forEach(b=>{ if(!b.dead) ctx.fillRect(b.x, b.y-2, 8,4);});
      // enemies
      enemies.forEach(e=>{ if(e.hit) e.x += 6; ctx.fillStyle = e.hit ? '#ff7a7a' : '#ffb86b'; ctx.beginPath(); ctx.arc(e.x,e.y,e.r,0,Math.PI*2); ctx.fill();});
      // cleanup
      for(let i=bullets.length-1;i>=0;i--) if(bullets[i].x > w || bullets[i].dead) bullets.splice(i,1);
      for(let i=enemies.length-1;i>=0;i--) if(enemies[i].x > w+200) enemies.splice(i,1);
    }
    window.addEventListener('keydown', (e)=>{ keys[e.key]=true; if(e.key===' ') bullets.push({x:ship.x+48,y:ship.y}); });
    window.addEventListener('keyup', (e)=>{ keys[e.key]=false; });
    loop();
    return ()=>{ cancelAnimationFrame(animId); };
  }
};

/* Game 3: Prus Little Oddy ‚Äî platformer */
games['prus'] = {
  name:'Prus Little Oddy',
  thumbDraw: (ctx,w,h,f)=>{
    ctx.fillStyle='#061320'; ctx.fillRect(0,0,w,h);
    ctx.fillStyle='#cbd8ff'; ctx.font='14px Inter'; ctx.fillText('Prus Little Oddy', 10,18);
    // ground
    ctx.fillStyle='#0e2b2f'; ctx.fillRect(0,h-36,w,36);
    // player bob
    const px = 40 + Math.abs(Math.sin(f*0.06))*30;
    ctx.fillStyle='#8f6bff'; ctx.fillRect(px,h-60,18,24);
    // floating coin
    ctx.beginPath(); ctx.arc(w-50, h-70 + Math.sin(f*0.09)*6, 8,0,Math.PI*2); ctx.fillStyle='#ffd966'; ctx.fill();
  },
  init(fullCanvas){
    const ctx = fullCanvas.getContext('2d');
    let w = fullCanvas.width = fullCanvas.clientWidth; let h = fullCanvas.height = fullCanvas.clientHeight;
    const player = {x:60,y:h-90,vy:0, on:false};
    const gravity = 1200;
    const keys = {};
    function resize(){ w = fullCanvas.width = fullCanvas.clientWidth; h = fullCanvas.height = fullCanvas.clientHeight; player.y = Math.min(player.y, h-90);}
    window.addEventListener('resize', resize);
    let animId, last = performance.now();
    function loop(now){
      animId = requestAnimationFrame(loop);
      const dt = (now-last)/1000; last=now;
      if(keys['ArrowLeft']||keys['a']) player.x -= 220*dt;
      if(keys['ArrowRight']||keys['d']) player.x += 220*dt;
      if((keys['ArrowUp']||keys['w']) && player.on){ player.vy = -450; player.on=false; }
      player.vy += gravity*dt; player.y += player.vy*dt;
      if(player.y > h-90){ player.y = h-90; player.vy=0; player.on=true; }
      // draw
      ctx.clearRect(0,0,w,h); ctx.fillStyle='#041017'; ctx.fillRect(0,0,w,h);
      ctx.fillStyle='#0e2b2f'; ctx.fillRect(0,h-70,w,70);
      ctx.fillStyle='#8f6bff'; ctx.fillRect(player.x, player.y, 28,40);
      ctx.fillStyle='#ffd966'; ctx.beginPath(); ctx.arc(w-120, h-110, 12,0,Math.PI*2); ctx.fill();
    }
    window.addEventListener('keydown', (e)=>{ keys[e.key]=true; });
    window.addEventListener('keyup', (e)=>{ keys[e.key]=false; });
    loop(performance.now());
    return ()=>{ cancelAnimationFrame(animId); };
  }
};

/* Game 4: Faraery Racers ‚Äî top-down mini-racer */
games['faraery'] = {
  name:'Faraery Racers',
  thumbDraw: (ctx,w,h,f)=>{
    ctx.fillStyle='#02101a'; ctx.fillRect(0,0,w,h);
    // racetrack simple oval
    ctx.strokeStyle='#0b2a35'; ctx.lineWidth=28; ctx.beginPath(); ctx.ellipse(w/2,h/2,120,64,0,0,Math.PI*2); ctx.stroke();
    // car
    const ang = f*0.06;
    const cx = w/2 + Math.cos(ang) * 100; const cy = h/2 + Math.sin(ang)*50;
    ctx.fillStyle='#8f6bff'; ctx.fillRect(cx-8,cy-6,18,12);
    ctx.fillStyle='#cbd8ff'; ctx.font='13px Inter'; ctx.fillText('Faraery Racers', 10,16);
  },
  init(fullCanvas){
    const ctx = fullCanvas.getContext('2d');
    let w = fullCanvas.width = fullCanvas.clientWidth; let h = fullCanvas.height = fullCanvas.clientHeight;
    window.addEventListener('resize', ()=>{ w = fullCanvas.width = fullCanvas.clientWidth; h = fullCanvas.height = fullCanvas.clientHeight;});
    const car = {ang:0, speed:0.03};
    let animId;
    function loop(){ animId = requestAnimationFrame(loop);
      car.ang += car.speed;
      ctx.clearRect(0,0,w,h); ctx.fillStyle='#020812'; ctx.fillRect(0,0,w,h);
      // track
      ctx.strokeStyle='#0b2a35'; ctx.lineWidth=32; ctx.beginPath(); ctx.ellipse(w/2,h/2,160,90,0,0,Math.PI*2); ctx.stroke();
      // car
      const cx = w/2 + Math.cos(car.ang) * 140; const cy = h/2 + Math.sin(car.ang) * 75;
      ctx.fillStyle='#8f6bff'; ctx.beginPath(); ctx.ellipse(cx,cy,14,8,0,0,Math.PI*2); ctx.fill();
    }
    loop();
    return ()=>{ cancelAnimationFrame(animId); };
  }
};

/* Setup thumbnails */
setupThumb('thumb-chasath', games['chasath'].thumbDraw);
setupThumb('thumb-iglaia', games['iglaia'].thumbDraw);
setupThumb('thumb-prus', games['prus'].thumbDraw);
setupThumb('thumb-faraery', games['faraery'].thumbDraw);

/* Overlay play logic */
const overlay = document.getElementById('overlay');
const overlayTitle = document.getElementById('overlay-title');
const gameCanvas = document.getElementById('gameCanvas');
let currentTearDown = null;
let currentGameKey = null;

function resizeGameCanvas() {
  // Set resolution to match CSS size
  gameCanvas.width = gameCanvas.clientWidth * devicePixelRatio;
  gameCanvas.height = gameCanvas.clientHeight * devicePixelRatio;
}

function openGame(key){
  currentGameKey = key;
  overlayTitle.textContent = games[key].name;
  overlay.classList.add('active');

  // Allow browser to render overlay before measuring size
  requestAnimationFrame(() => {
    resizeGameCanvas();
    if(currentTearDown) currentTearDown();
    currentTearDown = games[key].init(gameCanvas);
  });
}

function closeOverlay(){
  overlay.classList.remove('active');
  if(currentTearDown) currentTearDown(); 
  currentTearDown = null;
}

function restartOverlay(){
  if(currentGameKey){
    resizeGameCanvas();
    if(currentTearDown) currentTearDown();
    currentTearDown = games[currentGameKey].init(gameCanvas);
  }
}

/* Previews: clicking Preview will show progress strip for a second */
function previewGame(key){
  const strip = document.getElementById('preview-strip-' + key);
  strip.hidden = false;
  strip.style.animation = 'none';
  // trigger reflow to restart
  void strip.offsetWidth;
  strip.style.animation = null;
  setTimeout(()=> strip.hidden = true, 1400);
}

/* Contact form placeholder */
function sendContact(){
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const msg = document.getElementById('message').value;
  const result = document.getElementById('contactResult');
  result.style.display='block'; result.textContent = 'Thanks ' + name + '! (This is a demo contact form ‚Äî opens mail client.)';
  // open mail client
  window.location.href = `mailto:1sahilisbusy1@gmail.com?subject=Portfolio%20Contact%20from%20${encodeURIComponent(name)}&body=${encodeURIComponent(msg + '\\n\\n' + email)}`;
}

/* Light/dark toggle */
const modeToggle = document.getElementById('modeToggle');
modeToggle.addEventListener('click', ()=>{
  document.body.classList.toggle('light');
  const isLight = document.body.classList.contains('light');
  modeToggle.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
});

/* small accessibility & keyboard handling for overlay */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape') closeOverlay();
  if(e.key === 'p' || e.key === 'P'){ // pause overlay game if it exposes pause - here we just notify
    const instr = document.getElementById('overlay-instructions');
    instr.textContent = instr.textContent.includes('paused') ? 'Use arrow keys / WASD. Press P to pause.' : 'PAUSED ‚Äî press P to resume';
  }
});

/* subtle parallax on scroll: move 3D scene and floating icons */
window.addEventListener('scroll', ()=>{
  const y = window.scrollY;
  threeWrap.style.transform = `translateY(${y*0.02}px) scale(${1 - Math.min(0.06, y/4000)})`;
});

window.addEventListener('resize', () => {
  if(overlay.classList.contains('active')) resizeGameCanvas();
});

/* tiny performance: stop three.js when page hidden */
document.addEventListener('visibilitychange', ()=>{
  if(document.hidden) renderer.setAnimationLoop(null);
  else renderer.setAnimationLoop(animateThree);
});

/* End of main script */
</script>
</body>
</html>


<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sahil Gurung | Portfolio</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      scroll-behavior: smooth;
      background: #f4f4f4;
      color: #333;
    }

    header nav {
      position: sticky;
      top: 0;
      background: #222;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      z-index: 1000;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 1rem;
    }

    nav a {
      color: white;
      text-decoration: none;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #00bcd4;
    }

    #hero {
      text-align: center;
      padding: 4rem 2rem;
      background: linear-gradient(to right, #00bcd4, #2196f3);
      color: white;
    }

    #hero img {
      width: 120px;
      border-radius: 50%;
      margin-bottom: 1rem;
      animation: fadeIn 2s ease-in-out;
    }

    .btn {
      background: white;
      color: #2196f3;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      text-decoration: none;
      font-weight: bold;
    }

    section {
      padding: 3rem 2rem;
    }

    .project-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
      padding: 1rem;
      transition: transform 0.3s;
    }

    .project-card:hover {
      transform: scale(1.05);
    }

    .project-card img {
      width: 100%;
      border-radius: 5px;
    }

    form input, form textarea {
      width: 100%;
      margin-bottom: 1rem;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    form button {
      background: #2196f3;
      color: white;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
    }

    footer {
      text-align: center;
      padding: 2rem;
      background: #222;
      color: white;
      position: relative;
    }

    #scrollTop {
      position: absolute;
      right: 1rem;
      bottom: 1rem;
      background: #00bcd4;
      border: none;
      padding: 0.5rem;
      border-radius: 50%;
      cursor: pointer;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <h1>Sahil Gurung</h1>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <section id="hero">
    <img src="https://i.imgur.com/yourProfileImage.jpg" alt="Sahil Gurung" />
    <h2>Full-Stack Developer</h2>
    <p>Building scalable apps with Flutter, Node.js, and MongoDB</p>
    <a href="#projects" class="btn">View Projects</a>
  </section>

  <section id="about">
    <h2>About Me</h2>
    <p>I'm a passionate developer with experience in mobile and web development, cloud integration, and backend architecture.</p>
  </section>

  <section id="projects">
    <h2>Projects</h2>
    <div class="project-card">
      <img src="https://i.imgur.com/project1.jpg" alt="Zing Closet" />
      <h3>Zing Closet</h3>
      <p>E-commerce app built with Flutter and Node.js</p>
    </div>
    <div class="project-card">
      <img src="https://i.imgur.com/project2.jpg" alt="D. Cube Internship" />
      <h3>D. Cube Internship</h3>
      <p>Mobile & web apps with Flutter, Node.js, and MySQL</p>
    </div>
  </section>

  <section id="contact">
    <h2>Contact Me</h2>
    <form>
      <input type="text" placeholder="Your Name" required />
      <input type="email" placeholder="Your Email" required />
      <textarea placeholder="Your Message" required></textarea>
      <button type="submit">Send</button>
    </form>
  </section>

  <footer>
    <p>¬© 2025 Sahil Gurung</p>
    <button id="scrollTop">‚Üë</button>
  </footer>

  <script>
    document.getElementById("scrollTop").addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  </script>
</body>
</html> -->